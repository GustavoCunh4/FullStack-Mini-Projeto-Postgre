_type: export
__export_format: 4
__export_date: 2025-10-18T00:00:00.000Z
__export_source: insomnia.desktop.app
resources:
  # Workspace (Collection)
  - _id: wrk_fsmp
    _type: workspace
    name: FullStack Mini Projeto
    scope: collection

  # Environments (simples, sem heran√ßa)
  - _id: env_local
    _type: environment
    parentId: wrk_fsmp
    name: Local
    data:
      baseUrl: http://localhost:3000

  - _id: env_prod
    _type: environment
    parentId: wrk_fsmp
    name: Production
    data:
      baseUrl: https://seu-projeto.vercel.app

  # Grupos
  - _id: fld_auth
    _type: request_group
    parentId: wrk_fsmp
    name: Auth

  - _id: fld_protected
    _type: request_group
    parentId: wrk_fsmp
    name: Protected

  - _id: fld_tasks
    _type: request_group
    parentId: wrk_fsmp
    name: Tasks

  - _id: fld_debug
    _type: request_group
    parentId: wrk_fsmp
    name: Debug

  # ---------- Register ----------
  - _id: req_register_success
    _type: request
    parentId: fld_auth
    name: Register - success
    method: POST
    url: "{{ baseUrl }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "Guga Teste",
          "email": "guga.success@example.com",
          "password": "Guga123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_duplicate
    _type: request
    parentId: fld_auth
    name: Register - duplicate email
    method: POST
    url: "{{ baseUrl }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "Guga Teste",
          "email": "guga.success@example.com",
          "password": "OutraSenha123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_invalid_password
    _type: request
    parentId: fld_auth
    name: Register - invalid password
    method: POST
    url: "{{ baseUrl }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "Carol",
          "email": "carol@example.com",
          "password": "123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_invalid_email
    _type: request
    parentId: fld_auth
    name: Register - invalid email
    method: POST
    url: "{{ baseUrl }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "Bob",
          "email": "email_invalido",
          "password": "123456"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_malformed
    _type: request
    parentId: fld_auth
    name: Register - malformed
    method: POST
    url: "{{ baseUrl }}/register"
    body:
      mimeType: application/json
      text: |
        { "email": "dan@example.com" }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_register_success_user2
    _type: request
    parentId: fld_auth
    name: Register - success (user 2)
    method: POST
    url: "{{ baseUrl }}/register"
    body:
      mimeType: application/json
      text: |
        {
          "name": "Outra Pessoa",
          "email": "outra.pessoa@example.com",
          "password": "OutraSenha123"
        }
    headers:
      - name: Content-Type
        value: application/json

  # ---------- Login ----------
  - _id: req_login_success
    _type: request
    parentId: fld_auth
    name: Login - success
    method: POST
    url: "{{ baseUrl }}/login"
    body:
      mimeType: application/json
      text: |
        {
          "email": "guga.success@example.com",
          "password": "Guga123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_login_wrong_password
    _type: request
    parentId: fld_auth
    name: Login - wrong password
    method: POST
    url: "{{ baseUrl }}/login"
    body:
      mimeType: application/json
      text: |
        {
          "email": "guga.success@example.com",
          "password": "errada123"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_login_invalid_email
    _type: request
    parentId: fld_auth
    name: Login - invalid email
    method: POST
    url: "{{ baseUrl }}/login"
    body:
      mimeType: application/json
      text: |
        {
          "email": "nao_e_email",
          "password": "123456"
        }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_login_malformed
    _type: request
    parentId: fld_auth
    name: Login - malformed
    method: POST
    url: "{{ baseUrl }}/login"
    body:
      mimeType: application/json
      text: |
        { "email": "falta_senha@example.com" }
    headers:
      - name: Content-Type
        value: application/json

  - _id: req_login_success_user2
    _type: request
    parentId: fld_auth
    name: Login - success (user 2)
    method: POST
    url: "{{ baseUrl }}/login"
    body:
      mimeType: application/json
      text: |
        {
          "email": "outra.pessoa@example.com",
          "password": "OutraSenha123"
        }
    headers:
      - name: Content-Type
        value: application/json

  # ---------- Protected ----------
  - _id: req_protected_valid
    _type: request
    parentId: fld_protected
    name: Protected - with valid token
    method: GET
    url: "{{ baseUrl }}/protected"
    authentication:
      type: bearer
      token: "{% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"

  - _id: req_protected_no_token
    _type: request
    parentId: fld_protected
    name: Protected - without token
    method: GET
    url: "{{ baseUrl }}/protected"

  - _id: req_protected_invalid_token
    _type: request
    parentId: fld_protected
    name: Protected - with invalid token
    method: GET
    url: "{{ baseUrl }}/protected"
    headers:
      - name: Authorization
        value: Bearer INVALID_TOKEN_123

  # ---------- Tasks ----------
  - _id: req_tasks_create_success
    _type: request
    parentId: fld_tasks
    name: Tasks - create success
    method: POST
    url: "{{ baseUrl }}/tasks"
    body:
      mimeType: application/json
      text: |
        {
          "title": "Primeira tarefa",
          "description": "Exemplo completo",
          "status": "pending",
          "priority": "high",
          "dueDate": "2025-12-31"
        }
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"
      - name: Content-Type
        value: application/json

  - _id: req_tasks_list_success
    _type: request
    parentId: fld_tasks
    name: Tasks - list success
    method: GET
    url: "{{ baseUrl }}/tasks"
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"

  - _id: req_tasks_list_filtered
    _type: request
    parentId: fld_tasks
    name: Tasks - list filtered
    method: GET
    url: "{{ baseUrl }}/tasks?status=pending&priority=high"
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"

  - _id: req_tasks_get_success
    _type: request
    parentId: fld_tasks
    name: Tasks - get by id
    method: GET
    url: "{{ baseUrl }}/tasks/{% response 'body', 'req_tasks_create_success', '$.task.id', 'TASK_ID' %}"
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"

  - _id: req_tasks_put_success
    _type: request
    parentId: fld_tasks
    name: Tasks - replace success
    method: PUT
    url: "{{ baseUrl }}/tasks/{% response 'body', 'req_tasks_create_success', '$.task.id', 'TASK_ID' %}"
    body:
      mimeType: application/json
      text: |
        {
          "title": "Primeira tarefa atualizada",
          "description": "Descricao substituida",
          "status": "in_progress",
          "priority": "medium",
          "dueDate": "2026-01-15"
        }
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"
      - name: Content-Type
        value: application/json

  - _id: req_tasks_patch_success
    _type: request
    parentId: fld_tasks
    name: Tasks - patch success
    method: PATCH
    url: "{{ baseUrl }}/tasks/{% response 'body', 'req_tasks_create_success', '$.task.id', 'TASK_ID' %}"
    body:
      mimeType: application/json
      text: |
        {
          "status": "completed",
          "description": "Finalizada com sucesso"
        }
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"
      - name: Content-Type
        value: application/json

  - _id: req_tasks_list_no_token
    _type: request
    parentId: fld_tasks
    name: Tasks - list without token
    method: GET
    url: "{{ baseUrl }}/tasks"

  - _id: req_tasks_list_invalid_token
    _type: request
    parentId: fld_tasks
    name: Tasks - list invalid token
    method: GET
    url: "{{ baseUrl }}/tasks"
    headers:
      - name: Authorization
        value: "Bearer INVALID_TOKEN_123"

  - _id: req_tasks_get_forbidden
    _type: request
    parentId: fld_tasks
    name: Tasks - get forbidden (other user)
    method: GET
    url: "{{ baseUrl }}/tasks/{% response 'body', 'req_tasks_create_success', '$.task.id', 'TASK_ID' %}"
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success_user2', '$.token', 'NO_TOKEN' %}"

  - _id: req_tasks_delete_success
    _type: request
    parentId: fld_tasks
    name: Tasks - delete success
    method: DELETE
    url: "{{ baseUrl }}/tasks/{% response 'body', 'req_tasks_create_success', '$.task.id', 'TASK_ID' %}"
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"

  - _id: req_tasks_create_invalid
    _type: request
    parentId: fld_tasks
    name: Tasks - create invalid payload
    method: POST
    url: "{{ baseUrl }}/tasks"
    body:
      mimeType: application/json
      text: |
        {
          "title": "",
          "priority": "urgent"
        }
    headers:
      - name: Authorization
        value: "Bearer {% response 'body', 'req_login_success', '$.token', 'NO_TOKEN' %}"
      - name: Content-Type
        value: application/json

  # ---------- Debug (dev only) ----------
  - _id: req_debug_db
    _type: request
    parentId: fld_debug
    name: Debug - current DB info
    method: GET
    url: "{{ baseUrl }}/_debug/db"

